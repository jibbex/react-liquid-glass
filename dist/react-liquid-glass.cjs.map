{"version":3,"file":"react-liquid-glass.cjs","names":["cssVariables: LiquidGlassCSSVariables","composedStyle: CSSProperties"],"sources":["../src/lib/LiquidGlass.tsx"],"sourcesContent":["import { forwardRef, useEffect, useMemo } from 'react';\nimport type { CSSProperties, HTMLAttributes, ReactNode } from 'react';\nimport '../styles.css';\n\nexport type LiquidGlassRef = HTMLDivElement\n\nexport interface LiquidGlassProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'children'> {\n  children?: ReactNode\n  /**\n   * Strength of the diffusion layer between 0 (disabled) and 1 (maximum).\n   */\n  intensity?: number\n  /**\n   * Base tint used for the glass surface. Accepts any valid CSS color value.\n   */\n  tint?: string\n  /**\n   * Highlight color blended into the glass sheen.\n   */\n  highlightColor?: string\n  /**\n   * Strength of the highlight between 0 (hidden) and 1 (fully visible).\n   */\n  highlightStrength?: number\n  /**\n   * Blur radius applied to the glass pane in pixels.\n   */\n  blurRadius?: number\n  /**\n   * Opacity of the organic distortion noise between 0 and 1.\n   */\n  ripple?: number\n  /**\n   * Enables subtle motion cues for the highlight and noise layers.\n   */\n  animated?: boolean\n  /**\n   * Enables the SVG displacement filter beneath the surface.\n   */\n  distortion?: boolean\n  /**\n   * Identifier of the SVG filter that should be used for displacement.\n   */\n  distortionFilterId?: string\n  /**\n   * Intensity scale forwarded to the displacement filter.\n   */\n  distortionScale?: number\n}\n\ntype LiquidGlassCSSVariables = CSSProperties & {\n  '--rlg-intensity'?: string;\n  '--rlg-tint'?: string;\n  '--rlg-highlight-color'?: string;\n  '--rlg-highlight-strength'?: string;\n  '--rlg-blur-radius'?: string;\n  '--rlg-ripple-opacity'?: string;\n  '--rlg-backdrop-filter-prefix'?: string;\n};\n\nconst clamp = (value: number, min: number, max: number) => {\n  if (Number.isNaN(value)) return min;\n  return Math.min(Math.max(value, min), max);\n};\n\nconst mergeClassNames = (...values: Array<string | undefined>) =>\n  values.filter(Boolean).join(' ');\n\nconst injectDistortionFilter = (\n  filterId: string,\n  distortionScale: number,\n) => {\n  if (typeof window === 'undefined' || typeof document === 'undefined') {\n    return;\n  }\n\n  const normalizedScale = Math.min(Math.max(Math.abs(distortionScale), 0), 120);\n\n  const existing = document.getElementById(filterId) as SVGFilterElement | null;\n  if (existing) {\n    const displacementNode = existing.querySelector('feDisplacementMap');\n    if (displacementNode) {\n      displacementNode.setAttribute('scale', normalizedScale.toString());\n    }\n    return;\n  }\n\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svg.setAttribute('aria-hidden', 'true');\n  svg.setAttribute('focusable', 'false');\n  svg.style.position = 'absolute';\n  svg.style.width = '0';\n  svg.style.height = '0';\n  svg.style.visibility = 'hidden';\n\n  const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n  const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');\n  filter.id = filterId;\n  svg.setAttribute('data-rlg-filter', filterId);\n\n  const turbulence = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'feTurbulence',\n  );\n  turbulence.setAttribute('type', 'fractalNoise');\n  turbulence.setAttribute('baseFrequency', '0.004 0.0055');\n  turbulence.setAttribute('numOctaves', '2');\n  turbulence.setAttribute('seed', '7');\n  turbulence.setAttribute('result', 'distortNoise');\n\n  const blur = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');\n  blur.setAttribute('in', 'distortNoise');\n  blur.setAttribute('stdDeviation', '6.5');\n  blur.setAttribute('result', 'softNoise');\n\n  const displacement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'feDisplacementMap',\n  );\n  displacement.setAttribute('in', 'SourceGraphic');\n  displacement.setAttribute('in2', 'softNoise');\n  displacement.setAttribute('scale', normalizedScale.toString());\n  displacement.setAttribute('xChannelSelector', 'R');\n  displacement.setAttribute('yChannelSelector', 'G');\n\n  filter.appendChild(turbulence);\n  filter.appendChild(blur);\n  filter.appendChild(displacement);\n  defs.appendChild(filter);\n  svg.appendChild(defs);\n  document.body.appendChild(svg);\n}\n\nexport const LiquidGlass = forwardRef<LiquidGlassRef, LiquidGlassProps>(\n  (\n    {\n      children,\n      className,\n      style,\n      intensity = 0.45,\n      ripple = 0.6,\n      blurRadius = 16,\n      tint = 'rgba(255, 255, 255, 0.3)',\n      highlightColor = 'rgba(255, 255, 255, 0.6)',\n      highlightStrength = 0.55,\n      animated = true,\n      distortion = true,\n      distortionFilterId = 'rlg-distort-filter',\n      distortionScale = 36,\n      ...rest\n    },\n    ref,\n  ) => {\n    const supportsCssFeature = (property: string, value: string) =>\n      typeof CSS !== 'undefined' && typeof CSS.supports === 'function'\n        ? CSS.supports(property, value)\n        : false;\n\n    const supportsBackdropFilter =\n      supportsCssFeature('backdrop-filter', 'blur(1px)') ||\n      supportsCssFeature('-webkit-backdrop-filter', 'blur(1px)');\n\n    const isFirefox = navigator.userAgent.includes('Firefox');\n    const supportsSvgFilter = supportsCssFeature('backdrop-filter', `url(#${distortionFilterId})`);\n\n    const shouldApplyDistortion = distortion && supportsBackdropFilter && supportsSvgFilter && !isFirefox;\n\n    const variables = useMemo<LiquidGlassCSSVariables>(() => {\n      const cssVariables: LiquidGlassCSSVariables = {};\n      cssVariables['--rlg-intensity'] = clamp(intensity, 0, 1).toFixed(3);\n      cssVariables['--rlg-ripple-opacity'] = clamp(ripple, 0, 1).toFixed(3);\n      cssVariables['--rlg-highlight-strength'] = clamp(\n        highlightStrength,\n        0,\n        1,\n      ).toFixed(3);\n      cssVariables['--rlg-blur-radius'] = `${clamp(blurRadius, 0, 120).toFixed(\n        0,\n      )}px`;\n      cssVariables['--rlg-highlight-color'] = highlightColor;\n      cssVariables['--rlg-tint'] = tint;\n      cssVariables['--rlg-backdrop-filter-prefix'] = shouldApplyDistortion\n        ? `url(#${distortionFilterId}) `\n        : ' ';\n\n      return cssVariables;\n    }, [\n      intensity,\n      ripple,\n      blurRadius,\n      tint,\n      highlightColor,\n      highlightStrength,\n      distortionFilterId,\n      shouldApplyDistortion,\n    ])\n\n    const composedStyle: CSSProperties = {\n      ...variables,\n      ...style,\n    };\n\n    useEffect(() => {\n      if (!shouldApplyDistortion) {\n        return;\n      }\n\n      const normalized = clamp(distortionScale, -120, 120);\n      injectDistortionFilter(distortionFilterId, normalized);\n    }, [shouldApplyDistortion, distortionFilterId, distortionScale]);\n\n    return (\n        <div\n          ref={ref}\n          data-liquid-glass=\"\"\n          data-liquid-glass-animated={animated ? '' : undefined}\n          data-liquid-glass-distortion={distortion ? '' : undefined}\n          className={mergeClassNames('rlg-surface', className)}\n          style={composedStyle}\n          {...rest}\n        >\n          {children}\n      </div>\n    );\n  },\n);\n\nLiquidGlass.displayName = 'LiquidGlass';\n"],"mappings":"siBA6DA,IAAM,GAAS,EAAe,EAAa,IACrC,OAAO,MAAM,EAAM,CAAS,EACzB,KAAK,IAAI,KAAK,IAAI,EAAO,EAAI,CAAE,EAAI,CAGtC,GAAmB,GAAG,IAC1B,EAAO,OAAO,QAAQ,CAAC,KAAK,IAAI,CAE5B,GACJ,EACA,IACG,CACH,GAAI,OAAO,OAAW,KAAe,OAAO,SAAa,IACvD,OAGF,IAAM,EAAkB,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,EAAgB,CAAE,EAAE,CAAE,IAAI,CAEvE,EAAW,SAAS,eAAe,EAAS,CAClD,GAAI,EAAU,CACZ,IAAM,EAAmB,EAAS,cAAc,oBAAoB,CAChE,GACF,EAAiB,aAAa,QAAS,EAAgB,UAAU,CAAC,CAEpE,OAGF,IAAM,EAAM,SAAS,gBAAgB,6BAA8B,MAAM,CACzE,EAAI,aAAa,cAAe,OAAO,CACvC,EAAI,aAAa,YAAa,QAAQ,CACtC,EAAI,MAAM,SAAW,WACrB,EAAI,MAAM,MAAQ,IAClB,EAAI,MAAM,OAAS,IACnB,EAAI,MAAM,WAAa,SAEvB,IAAM,EAAO,SAAS,gBAAgB,6BAA8B,OAAO,CACrE,EAAS,SAAS,gBAAgB,6BAA8B,SAAS,CAC/E,EAAO,GAAK,EACZ,EAAI,aAAa,kBAAmB,EAAS,CAE7C,IAAM,EAAa,SAAS,gBAC1B,6BACA,eACD,CACD,EAAW,aAAa,OAAQ,eAAe,CAC/C,EAAW,aAAa,gBAAiB,eAAe,CACxD,EAAW,aAAa,aAAc,IAAI,CAC1C,EAAW,aAAa,OAAQ,IAAI,CACpC,EAAW,aAAa,SAAU,eAAe,CAEjD,IAAM,EAAO,SAAS,gBAAgB,6BAA8B,iBAAiB,CACrF,EAAK,aAAa,KAAM,eAAe,CACvC,EAAK,aAAa,eAAgB,MAAM,CACxC,EAAK,aAAa,SAAU,YAAY,CAExC,IAAM,EAAe,SAAS,gBAC5B,6BACA,oBACD,CACD,EAAa,aAAa,KAAM,gBAAgB,CAChD,EAAa,aAAa,MAAO,YAAY,CAC7C,EAAa,aAAa,QAAS,EAAgB,UAAU,CAAC,CAC9D,EAAa,aAAa,mBAAoB,IAAI,CAClD,EAAa,aAAa,mBAAoB,IAAI,CAElD,EAAO,YAAY,EAAW,CAC9B,EAAO,YAAY,EAAK,CACxB,EAAO,YAAY,EAAa,CAChC,EAAK,YAAY,EAAO,CACxB,EAAI,YAAY,EAAK,CACrB,SAAS,KAAK,YAAY,EAAI,EAGhC,MAAa,GAAA,EAAA,EAAA,aAET,CACE,WACA,YACA,QACA,YAAY,IACZ,SAAS,GACT,aAAa,GACb,OAAO,2BACP,iBAAiB,2BACjB,oBAAoB,IACpB,WAAW,GACX,aAAa,GACb,qBAAqB,qBACrB,kBAAkB,GAClB,GAAG,GAEL,IACG,CACH,IAAM,GAAsB,EAAkB,IAC5C,OAAO,IAAQ,KAAe,OAAO,IAAI,UAAa,WAClD,IAAI,SAAS,EAAU,EAAM,CAC7B,GAEA,EACJ,EAAmB,kBAAmB,YAAY,EAClD,EAAmB,0BAA2B,YAAY,CAEtD,EAAY,UAAU,UAAU,SAAS,UAAU,CACnD,EAAoB,EAAmB,kBAAmB,QAAQ,EAAmB,GAAG,CAExF,EAAwB,GAAc,GAA0B,GAAqB,CAAC,EAgCtFC,EAA+B,CACnC,IAAA,EAAA,EAAA,aA/BuD,CACvD,IAAMD,EAAwC,EAAE,CAiBhD,MAhBA,GAAa,mBAAqB,EAAM,EAAW,EAAG,EAAE,CAAC,QAAQ,EAAE,CACnE,EAAa,wBAA0B,EAAM,EAAQ,EAAG,EAAE,CAAC,QAAQ,EAAE,CACrE,EAAa,4BAA8B,EACzC,EACA,EACA,EACD,CAAC,QAAQ,EAAE,CACZ,EAAa,qBAAuB,GAAG,EAAM,EAAY,EAAG,IAAI,CAAC,QAC/D,EACD,CAAC,IACF,EAAa,yBAA2B,EACxC,EAAa,cAAgB,EAC7B,EAAa,gCAAkC,EAC3C,QAAQ,EAAmB,IAC3B,IAEG,GACN,CACD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACD,CAAC,CAIA,GAAG,EACJ,CAWD,OATA,EAAA,EAAA,eAAgB,CACd,GAAI,CAAC,EACH,OAGF,IAAM,EAAa,EAAM,EAAiB,KAAM,IAAI,CACpD,EAAuB,EAAoB,EAAW,EACrD,CAAC,EAAuB,EAAoB,EAAgB,CAAC,EAG5D,EAAA,EAAA,KAAC,MAAA,CACM,MACL,oBAAkB,GAClB,6BAA4B,EAAW,GAAK,IAAA,GAC5C,+BAA8B,EAAa,GAAK,IAAA,GAChD,UAAW,EAAgB,cAAe,EAAU,CACpD,MAAO,EACP,GAAI,EAEH,YACC,EAGX,CAED,EAAY,YAAc"}